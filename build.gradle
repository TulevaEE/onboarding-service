buildscript {
	ext {
		springBootVersion = '1.5.2.RELEASE'
	}
	repositories {
		mavenCentral()
	}
	dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
	}
}

apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'eclipse'
apply plugin: 'org.springframework.boot'

jar {
	baseName = 'onboarding-service'
	version = '0.0.1-SNAPSHOT'
}
sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
	mavenCentral()
	maven {
		url "https://raw.githubusercontent.com/TulevaEE/releases-repo/master/"
	}
	maven {
		url "https://jitpack.io"
	}
	maven {
		url "https://pubnexus.zerotech.ee/content/repositories/zeropublic/"
	}
}

dependencies {
	compile('org.springframework.boot:spring-boot-starter-actuator')
	compile('org.springframework.boot:spring-boot-starter-security')
	compile('org.springframework.boot:spring-boot-starter-web')
	compile('org.springframework.boot:spring-boot-starter-thymeleaf')
	runtime("org.springframework.boot:spring-boot-devtools")
	runtime('org.postgresql:postgresql')
	compile("org.springframework.boot:spring-boot-starter-data-jpa")
	compile("org.springframework.security.oauth:spring-security-oauth2")
	compile("cglib:cglib-nodep:3.2.4")
	compile("org.projectlombok:lombok:1.16.12")
	compile("org.jsoup:jsoup:1.8.1")
	compile('org.apache.commons:commons-lang3:3.5')
	compile('com.tapstream:rollbar-logback:0.1.4')

	compile('com.github.ErkoRisthein:mobileid:1.7')
    compile('ee.eesti.xtee6.kpr:xtee-kpr:1.2.1')

	compile('com.getsentry.raven:raven-logback:7.8.3')
	compile('io.springfox:springfox-swagger2:2.6.1')
	compile('io.springfox:springfox-swagger-ui:2.6.1')
	
	compile('org.hibernate:hibernate-java8')
	compile('com.fasterxml.jackson.datatype:jackson-datatype-jsr310')
	compile('com.rollbar:rollbar:0.5.3')
	compile('com.mandrillapp.wrapper.lutung:lutung:0.0.7')

    compile('org.springframework:spring-jms')
    compile('org.apache.geronimo.specs:geronimo-jms_1.1_spec:1.1')
    compile('com.ibm:disthub2:7.1.0.0')
    compile('com.ibm:mq:7.1.0.0')
    compile('com.ibm:mq-commonservices:7.1.0.0')
    compile('com.ibm:mq-headers:7.1.0.0')
    compile('com.ibm:mq-jmqi:7.1.0.0')
    compile('com.ibm:mq-jms:7.1.0.0')
    compile('com.ibm:mq-jms-nojndi:7.1.0.0')
    compile('com.ibm:mq-pcf:7.1.0.0')
	compile('ee.tuleva:epis-api:1.0')

	testCompile("com.h2database:h2")
	testCompile("org.springframework.boot:spring-boot-starter-test") {
		exclude module: "spock-core"
	}
	testCompile("org.spockframework:spock-core:1.1-groovy-2.4-rc-3")
	testCompile("org.spockframework:spock-spring:1.1-groovy-2.4-rc-3")
	testCompile("com.github.tomakehurst:wiremock:2.4.1")
	testCompile("org.springframework.security:spring-security-test")
    testCompile("org.springframework:spring-test:4.3.7.RELEASE")
	testCompile('cglib:cglib-nodep:3.2.4') // for stubbing of classes
    testCompile('junit:junit:4.12')
}

test {
	testLogging {
		events "passed", "skipped", "failed", "standardOut", "standardError"
		showCauses true
		showExceptions true
		showStackTraces true
		exceptionFormat = 'full'
	}
}

configurations {
    integrationTestCompile.extendsFrom testCompile
    integrationTestRuntime.extendsFrom testRuntime
}

sourceSets {
    integrationTest {
        java {
            compileClasspath += main.output + test.output
            runtimeClasspath += main.output + test.output
            srcDirs file('src/integration-test/java')
        }

		groovy {
			compileClasspath += main.output + test.output
			runtimeClasspath += main.output + test.output
			srcDirs file('src/integration-test/groovy')
		}

        resources.srcDirs file('src/integration-test/resources')
    }
}

task integrationTest(type: Test, description: 'Runs the integration tests.', group: 'Verification') {
    testClassesDir = sourceSets.integrationTest.output.classesDir
    classpath = sourceSets.integrationTest.runtimeClasspath
	enableAssertions = false
}

bootRun {
	systemProperties['spring.profiles.active'] = 'dev'
	environment "MHUB_KEYSTORE", "MIIOxAIBAzCCDn4GCSqGSIb3DQEHAaCCDm8Egg5rMIIOZzCCBVQGCSqGSIb3DQEHAaCCBUUEggVBMIIFPTCCBTkGCyqGSIb3DQEMCgECoIIE7jCCBOowHAYKKoZIhvcNAQwBAzAOBAjSbAEvCbSOxAICCAAEggTIoSKPS9TLPVrBhi8YrsWTJW8VHu4YR0IJp3g5kEMccVjUQYu9yeKPYgbmvZUvCAw4uOQSM34vQW1DaUV3bhA/DLDpWgA8OaGTBp5DOTBloTsT/cqfVaFpDUmc9TnVoGQY5Il3yprqPzdCrWmf1xtLg11LCkIO2bJRBrrIndtqJxsni9A4cyIEQU7psiobahw2wdVPpZ/c9sCU92VPpTaB4/WHFAvDaDpYsZB4TMJeSWsDT8srC89n8TsXx8qTNqrUfFD7URmoVT+PvRC7/h0MEyi/VPN1YA7q74GZakJmCazfvKBTl7YQs+reG8dykF+98wFpNa5K4SYa9aBoIMqjrD1ZqbtSE8WGc6yOYMmG8wl/gkbPzJtmplYibV9CtH+umtvqAcBLrEJh0fUucTEdsFDVi4HSZsahoxM6YdiZlbLAUD5EzGy8yQBnhCoOINOWAv+q4sB7QeLluq80WJd8vTGzmFpAydfCAufD0n6ffsRhDTB05+1BCQ4f8h4+m1shwVIkQKZdsRuKlCCFo/7BlE4piXty/oqPtw/WKIbm2GO0plY40EceoXq2HwzmUNrnH0zouKYNsGU/DW1VV/FkVTSYLXEM5KohKTBJBWiSqR3/+9ug1IgMNWyvyLPXrLIjUqIjls72bFAJbBhV0xWxrFx31eOrdAAGmcFIwEghHhz204la6UnkwSkOCakbeG1EchVkQwOnV9Rragx+iTL7ISKmZooB8VazqDsD7AVYskggv1WiitzYeg7o7y6c/qT7kCnWqI7vBNmPMVnvknrwZBW9dcvLjmJUJpocT1ehaw6hEuyo+UKDJ/mfH5uv57THtdfwLJIYkmY3TvYtflKhXpidEcENJ1pkbbwD7kQJlsdYxr+MfhRjR+4hOrc2BNstcgprpoY22xWWVktYoyhOMivTUgqad3u6lxwqK/HoY6TAH5+B12FHrhTpatFFVR7SM8BujHNup5NHLYdAGZTvgb8uFnoOT9js1A9swJmP+YXnobqy2s4Rz2TgBCf9du6lgpAXV9WPwZKIMgKW1VkwbbOQWIxyBehHmbZryNYBNeuUMf5k1be+GHRLwOlzQUYpsBctniZ4moZo5ZrQ4ujikTHe9V3l3qktwC+eOJaaF2A0k/UXOwd7evNnFmzvQnOpcNAk3f23bvXU/ngQ85Yn7uexR2bp5tl2/pJMyQi83PURe1yyHicB5VrQNeJ95ODxN6PzU23jeevu/9agR0w5nGrxuX6VYJBrPf1Bb11Oux3xauVvrqmBNYmUYC1uEnlCMgMYylkiJLjHADa4hr1pRjKqkv5Qypiip4yW9CglITMOnBjmCWV8nviAkrEk1GrplK2SqgoN3OK1wNCQyNGAEyzelQZ3zPuNI0b/fbtbrt4kMm0vd5lvTMwUFA+OfEqCn76DuzCXO3jFKP/IfHOmw0sYHPbZOvXIUzFN6CHNS1Hfwy7Nwe5ajPNQJHgh4aUrGfXTD6asU0tqha7A4uJ4zIPHIx6I+CVoPfB+Xn0u5mKPUxq/V60kBTB5Rg+BSPDAMntVQszS9ier50CNGl1LlpuJrtfuvU08aOB18+1GAel4w0Rh8G/wRH2NQzcnk2EwIFdIu6/bvqmKnaopGRyAm2ukrY7OfvuxMTgwEQYJKoZIhvcNAQkUMQQeAgAxMCMGCSqGSIb3DQEJFTEWBBTNbLiPfxo+C13XN/g+DkopCPV2yzCCCQsGCSqGSIb3DQEHBqCCCPwwggj4AgEAMIII8QYJKoZIhvcNAQcBMCgGCiqGSIb3DQEMAQYwGgQUHxd8cc0cY+9XxqbyBP3CAGMhsWUCAgQAgIIIuF26xYsFwiGiYSVUwsu8Cf5SiF9zYMbFmM1I+HP/mV+iebcjQAbwt/D/cRiumsrA8UoizPgvmMudTPfw8ocQU6c1PzH/7ypCzPYz9ZnRZxyES/9Gfg4L5YO6BGkYu9jK5aeKqJwKe1ZQ5y3W/F4GG1UwGY8vk/Xd7k6rvEdy774c8Qy6AsSNT53dFPvgNTjFgbq6NacZhwFtrDN1ETHwHnU7SLegL4oXcPuhGOdkaOg7bhm/NgPT3CUknKKFiF7zYtDa7hJYWIwdAdp5oE8A3lU5Vg0r6jRd/qDqe32ZAqwm2YjDKwBPCmiid8we19+3sqtaWFjjmz1p18X+1c6Ond1LoAIofPBYgZINQEbAUOIQLA3NB/QZCS/bxjWV6L7HtwHRqf69XeTko/+O7BU9jzX0jQuPzWhP0hfRcko4jVXi6I1tv7v2h9g6XM3Z6HECzLb4D0gZUDApy9zOWqcqXeBqV02ZEEFwQhv66fmN9fYftvFvQ8j71j48VMrV6MCh/zk0/FCw6/apz5t1yDmBMcKoyaKqiGUZ29o97d+DY7GgQOXjMWN4nDzclGfBljVjqPV2SfPs3H1Yx5VIaPxgRYHqFDjctNgf4qNWN+VtzJcZmAnuzW+GeOMrGIJKmV+RqXtPFhb9RMTcZRoeluC4hNlq+Px4Scw1Ju4E+exEBLJ/tiOGkPLx69+O4/cs2MXnnLKoU7aJJ3Sp9qprivEa8iZkdPkY/qgY1hbhk24KMzusgAvXxP8/PStCErQ6vvT8ShRQ830zKAfR3rITclyfsMNgaysKLug/9t68fJP8CmkUAhURPCmgLK3IjfMgPGeDcaF2eA9nvRDgmucrWGghiqZNC4NqSnZhRm8VDBfO9O8K/RXafqKDhQybUoCJ6ZmQCLajPDLMk0LvZ5yHuriLYUeruwIb36IDHHEZmjGKO4bPwDgAxW6Fla9P90HXEjP5c79Qrh+gybP+7dqswQoI5Azc8XRkd4Cj8k8w+eMkmvkaPLCwPZjYFnWFa0XtVaZX2mgXeeizH5kUkq5QmRaw+ALPY7Pwh9MWtoKV8xFJQyybYOTYif8vuib9i9jo30MzhfNkttsRj2fWedogb3aK/+xdiRojAJ0CVHvc914Qz4LQuVvFvJILrDUuPzXgGgqwpq/Gnzg2rQv44DQU3IgTRJWcj+2m09cpp+qYujUNLuCjwtW0Mm+JO5sPlDBrialAc88nvfHQi0H70p/TV7wXWRqkSqFvsl2bFVEo9n4iV22gqdHfMvowYQSoTqFBo+fjcs9Oh/0BNZBAzUFZWjfr9CPXH7BCqubD87LVLyFUwveihjkeq3WBffi4UM4M7k4c3BDjziYzpKNEUyi3F8gtLvETWxW+YbdLycjkcDGQrWa4A3aPAPxd5eY9hFwV/Xi2ZxTJ9OqGU2zCwQm2EdDMTk2AAhv4WzThZ4+yvwEKEJuX5C+OJdud0DkyROOYb/LZ4mrIW1Bukhb/pF6x1bLgCq1J9iplTHTMoNB5EymCWWHu1ZSGj2gYRXmPOifQyegF2Ot/hh324kYxdLBPXW04/5Z5xGXXluq2KoTlsbDM3VHnY332WAKaMOWFndVA+Ntgr2HzcQr5TgwJB/lBzBhH1rQbiF1niA3e6kdbque0XFyCXSQsC0WguWXfAxAEnF8HeKaa6KXr7KckfO+jnagBxVqUl+MzrVEsqkrcpTQvIyMolx5Ejimgv/H9pRsUi332psZjvU6kD5+3q+kPCeyoE/2T7G5bkp5P9v05EdTzNFUA4nNa4HMm0UZjQAVtq8BN0wRvQwLGNYYrM7VUBToqjz+zDMsQ6C7MXJacxH3Muw/Bxcv5H6HvtRvnOk+0rRqdiPae3chrYJ8MYxICVArRMkG8vBr8RcGSv+2NysfrUKoT0LQ9+vfa8A8ONucHG6IVowwKdnfe7WR/JCfOAYYJ7HhOaRL9gHJK/YVV8Wi5Neo9Paue+kbDbH6JKLM9OsuzXXY7NIcAJh0jcjgL5JKQ8tLeJZf/+AjtXHYgkfzl/I+oQrmoeB1alTWsUmVMcC56jBynNetKj2+MYa/+j9qHFqVrhymLh5YUx407lp2lvbqmvT7LQcpFvIiap0OJa0lq0/q8vnbCndmd0o0HarwFeeq5W2TYTOJgsFHYVUGEQxbCuY4phP2DInCs159wQI/J/VS4TlB6eAGf8sUyCgnefgm9wzwvaPtnpCqm5IK2K1JC8DnRlIckraWBTU77E9mwFNhTD+fSGPj3cQs3HKhOc81fYth/Kf0oU3bnP4enUCD5WTJRyh9Tsrl5C7EAYP/Y6zZ6eAUapRv8zGrisGvQ+yelVbBTYVvunESE+u3j3+X7bvUlzhHp914NPz9w5zoYJVDu0M0tKZ7/PB6ySdJPf05YhAKOhIbx4DPH+l+MV9tHR8XT7uRPx2WvsVuJEimkb0nx14GTZe5x5uYyuNujMc6RzzF9yLEq1L8t+BR/avYGHukJ+pHICzsKeKxnnqgDrMMldnYVhgqQIrLtTsPOCc1fPbUWwSV9ruMITivGEuTX8E8jbPHozSNPSjZ87fBsdHMUFivN3iELsC0TVT5sY0U1lA7cxUfkqyyUEI7e4oVMnj5Rc2UIZybM05Fb4zuetKjGokHrjLZ66DyK83NRfAIfXHSySjsmIyHI3z+DDrMj7pwq1IMIAfmQQFVh7+6dSc3zJWONGrJ+8dKIH4ovtREXQPO9ICOGybJp2TFsBNKmZ2sR+9lv3MjNmXjM+9rhqDFYf4ZelTARn2OawINjlBkyZ4oWb2s5fYxXPNc0062ge6YrdfHpRBghVQjLnMZndJeuxEtdRKRpfkjbQHteG4KSlRs63ZVUz5xrkg+ENeMvSVKV/e5Q2MP27dnIqNfYa9tQgHYjwacA9KgT//aZYYc5AoQ3ZWMh+xwWZe3U0YBtAUcXyd/zOuNROTXYUjCk9YDf4Kbgs/wuyEMp2frnOYgAyBjR7nbnpDA9MCEwCQYFKw4DAhoFAAQUlMVNN8mIyysL47IgiDC/6bF7/F8EFOy/d7ScD5Uh1RVgALypbVzd5PLXAgIEAA=="
	environment "SOCKS_PROXY_URL", "https://quotaguard8274:2b2379c6d443@eu-west-1-babbage.quotaguard.com:1080"
	environment "MHUB_KEYSTORE_PASSWORD", "password"
	environment "QUOTAGUARDSTATIC_URL", "http://quotaguard8274:2b2379c6d443@54.72.77.249:9293"
	enableAssertions = false
}